@if(user()) {
<div class="profile-card">
  <mat-card>
    <div class="header">
      <img class="avatar" [src]="user()?.profilePictureUrl || defaultImage" alt="User Avatar" />

      <div class="user-info">
        <h2>{{ user()?.firstName }} {{ user()?.lastName }}</h2>
        <p class="sub">Age: {{ user()?.age }}</p>
        <p class="sub">Gender: {{ user()?.gender == 0 ? 'Male' : 'Female' }}</p>
      </div>
    </div>

    <mat-card-content>
      <div class="section">
        <h3>Bio</h3>
        <p>{{ user()?.bio || 'No bio provided.' }}</p>
      </div>

      <div class="section">
        <h3>Activity</h3>
        <p>Created: {{ user()?.created | date:'mediumDate' }}</p>
        <p>Last Active: {{ user()?.lastActive | date:'short' }}</p>
      </div>
    </mat-card-content>
    <mat-card-actions align="end">
      @if(currentUserId() !== user()?.id) {
      <a mat-flat-button color="primary" [routerLink]="['/chat', user()?.id]">
        <mat-icon>send</mat-icon>
        Send Message
      </a>
      }
      @else {
      <button mat-flat-button color="primary" (click)="fileInput.click()">
        <mat-icon>image</mat-icon>
        Add new image
      </button>
      <input #fileInput type="file" accept="image/*" hidden (change)="onFileSelected($event)" />
      }
    </mat-card-actions>

  </mat-card>

  <!-- User Images Section -->
  @if(currentUserId() === user()?.id) {
    <app-user-pictures [userId]="userId()"></app-user-pictures>
  }
</div>

<div class="posts-section">
  <h3 class="posts-title">Posts</h3>

  @if(posts().length === 0) {
  <p class="empty">This user has not posted anything yet.</p>
  }

  @for (post of posts(); track post.id) {
  <app-post-item [post]="post"></app-post-item>
  }
</div>
}